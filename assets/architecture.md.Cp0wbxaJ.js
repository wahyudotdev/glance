import{_ as a,o as i,c as n,ag as e}from"./chunks/framework.cqfd-qMR.js";const d=JSON.parse('{"title":"Architecture","description":"","frontmatter":{},"headers":[],"relativePath":"architecture.md","filePath":"architecture.md"}'),l={name:"architecture.md"};function t(p,s,r,h,o,c){return i(),n("div",null,[...s[0]||(s[0]=[e(`<h1 id="architecture" tabindex="-1">Architecture <a class="header-anchor" href="#architecture" aria-label="Permalink to &quot;Architecture&quot;">​</a></h1><p>Technical overview of Glance&#39;s architecture and design decisions.</p><h2 id="high-level-overview" tabindex="-1">High-Level Overview <a class="header-anchor" href="#high-level-overview" aria-label="Permalink to &quot;High-Level Overview&quot;">​</a></h2><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>┌─────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                      Client Apps                         │</span></span>
<span class="line"><span>│    (Browser, cURL, Java, Android, Node.js, etc.)        │</span></span>
<span class="line"><span>└───────────────────────┬─────────────────────────────────┘</span></span>
<span class="line"><span>                        │ HTTP/HTTPS</span></span>
<span class="line"><span>                        ▼</span></span>
<span class="line"><span>┌─────────────────────────────────────────────────────────┐</span></span>
<span class="line"><span>│                   Glance Proxy (:15500)                  │</span></span>
<span class="line"><span>│  ┌──────────────────────────────────────────────────┐  │</span></span>
<span class="line"><span>│  │           MITM Proxy (goproxy)                   │  │</span></span>
<span class="line"><span>│  │  • Certificate generation                        │  │</span></span>
<span class="line"><span>│  │  • Request/Response interception                 │  │</span></span>
<span class="line"><span>│  │  • Rule matching &amp; execution                     │  │</span></span>
<span class="line"><span>│  └──────────────────────────────────────────────────┘  │</span></span>
<span class="line"><span>│                        │                                 │</span></span>
<span class="line"><span>│                        ▼                                 │</span></span>
<span class="line"><span>│  ┌──────────────────────────────────────────────────┐  │</span></span>
<span class="line"><span>│  │            Storage Layer (SQLite)                │  │</span></span>
<span class="line"><span>│  │  • Traffic logging                               │  │</span></span>
<span class="line"><span>│  │  • Rule persistence                              │  │</span></span>
<span class="line"><span>│  │  • Scenario recording                            │  │</span></span>
<span class="line"><span>│  └──────────────────────────────────────────────────┘  │</span></span>
<span class="line"><span>└───────────┬──────────────────────────────┬──────────────┘</span></span>
<span class="line"><span>            │                              │</span></span>
<span class="line"><span>            ▼                              ▼</span></span>
<span class="line"><span>┌────────────────────────┐    ┌──────────────────────────┐</span></span>
<span class="line"><span>│  Dashboard (:15501)    │    │    MCP Server (:15502)   │</span></span>
<span class="line"><span>│  ┌──────────────────┐  │    │  ┌────────────────────┐  │</span></span>
<span class="line"><span>│  │  API (Fiber)     │  │    │  │  MCP Protocol      │  │</span></span>
<span class="line"><span>│  │  • REST endpoints│  │    │  │  • Resources       │  │</span></span>
<span class="line"><span>│  │  • WebSocket hub │  │    │  │  • Tools           │  │</span></span>
<span class="line"><span>│  └──────────────────┘  │    │  │  • Prompts         │  │</span></span>
<span class="line"><span>│  ┌──────────────────┐  │    │  └────────────────────┘  │</span></span>
<span class="line"><span>│  │  Frontend (React)│  │    │                          │</span></span>
<span class="line"><span>│  │  • TypeScript    │  │    │  Used by:                │</span></span>
<span class="line"><span>│  │  • Tailwind CSS  │  │    │  • Claude Desktop        │</span></span>
<span class="line"><span>│  │  • Real-time UI  │  │    │  • Other MCP clients     │</span></span>
<span class="line"><span>│  └──────────────────┘  │    │                          │</span></span>
<span class="line"><span>└────────────────────────┘    └──────────────────────────┘</span></span></code></pre></div><h2 id="components" tabindex="-1">Components <a class="header-anchor" href="#components" aria-label="Permalink to &quot;Components&quot;">​</a></h2><h3 id="_1-mitm-proxy" tabindex="-1">1. MITM Proxy <a class="header-anchor" href="#_1-mitm-proxy" aria-label="Permalink to &quot;1. MITM Proxy&quot;">​</a></h3><p><strong>Technology</strong>: <a href="https://github.com/elazarl/goproxy" target="_blank" rel="noreferrer">elazarl/goproxy</a></p><p><strong>Responsibilities</strong>:</p><ul><li>Intercept HTTP and HTTPS traffic</li><li>Generate and sign certificates on-the-fly</li><li>Apply rules (mocks, breakpoints)</li><li>Forward modified traffic</li></ul><p><strong>Key Features</strong>:</p><ul><li><strong>Certificate Authority</strong>: Generates a local CA certificate on startup</li><li><strong>Dynamic Certificates</strong>: Creates valid certificates for each intercepted domain</li><li><strong>Request Pipeline</strong>: Processes requests through rule engine before forwarding</li><li><strong>Response Pipeline</strong>: Processes responses before returning to client</li></ul><p><strong>Flow</strong>:</p><ol><li>Client makes HTTPS request</li><li>Proxy intercepts, performs TLS handshake with dynamic certificate</li><li>Proxy checks rules (mocks, breakpoints)</li><li>If no rule matches, forwards to destination</li><li>Logs request/response to database</li><li>Returns response to client</li></ol><h3 id="_2-storage-layer" tabindex="-1">2. Storage Layer <a class="header-anchor" href="#_2-storage-layer" aria-label="Permalink to &quot;2. Storage Layer&quot;">​</a></h3><p><strong>Technology</strong>: <a href="https://modernc.org/sqlite" target="_blank" rel="noreferrer">modernc.org/sqlite</a> (Pure Go SQLite)</p><p><strong>Schema</strong>:</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Traffic table</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> traffic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    method </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    url</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    duration </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    timestamp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> DATETIME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    request_headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- JSON</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    request_body BLOB,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    response_headers </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- JSON</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    response_body BLOB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Rules table</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- &#39;mock&#39; or &#39;breakpoint&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    enabled</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> BOOLEAN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    url_pattern </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    method </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- JSON</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    match_count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INTEGER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    last_matched </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DATETIME</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- Scenarios table</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> scenarios</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    description</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    steps </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- JSON array</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    variable_mappings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">TEXT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- JSON</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    created </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DATETIME</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    modified </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DATETIME</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p><strong>Optimizations</strong>:</p><ul><li><strong>WAL Mode</strong>: Write-Ahead Logging for better concurrency</li><li><strong>Write-Behind Cache</strong>: Batches writes for performance</li><li><strong>Indexes</strong>: On url, method, timestamp for fast queries</li><li><strong>Prepared Statements</strong>: Reused for common queries</li></ul><p><strong>Database Size Management</strong>:</p><ul><li>Auto-vacuum enabled</li><li>Configurable retention policy (planned)</li><li>Manual clear via API/Dashboard</li></ul><h3 id="_3-dashboard-api" tabindex="-1">3. Dashboard API <a class="header-anchor" href="#_3-dashboard-api" aria-label="Permalink to &quot;3. Dashboard API&quot;">​</a></h3><p><strong>Technology</strong>: <a href="https://github.com/gofiber/fiber" target="_blank" rel="noreferrer">gofiber/fiber</a> v2</p><p><strong>Endpoints</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>GET    /api/traffic              - List traffic</span></span>
<span class="line"><span>GET    /api/traffic/:id          - Get traffic details</span></span>
<span class="line"><span>DELETE /api/traffic              - Clear all traffic</span></span>
<span class="line"><span></span></span>
<span class="line"><span>GET    /api/rules                - List rules</span></span>
<span class="line"><span>POST   /api/rules/mocks          - Create mock</span></span>
<span class="line"><span>POST   /api/rules/breakpoints    - Create breakpoint</span></span>
<span class="line"><span>PUT    /api/rules/:id            - Update rule</span></span>
<span class="line"><span>DELETE /api/rules/:id            - Delete rule</span></span>
<span class="line"><span></span></span>
<span class="line"><span>GET    /api/scenarios            - List scenarios</span></span>
<span class="line"><span>GET    /api/scenarios/:id        - Get scenario</span></span>
<span class="line"><span>POST   /api/scenarios            - Create scenario</span></span>
<span class="line"><span>PUT    /api/scenarios/:id        - Update scenario</span></span>
<span class="line"><span>DELETE /api/scenarios/:id        - Delete scenario</span></span>
<span class="line"><span>POST   /api/scenarios/:id/replay - Replay scenario</span></span>
<span class="line"><span></span></span>
<span class="line"><span>GET    /api/proxy/status         - Proxy status</span></span>
<span class="line"><span>GET    /api/proxy/ca.crt         - Download CA cert</span></span>
<span class="line"><span></span></span>
<span class="line"><span>WS     /ws/traffic               - Real-time traffic stream</span></span></code></pre></div><p><strong>WebSocket Hub</strong>:</p><ul><li>Manages concurrent WebSocket connections</li><li>Broadcasts new traffic to all connected clients</li><li>Handles connection lifecycle (connect, disconnect, error)</li></ul><p><strong>Architecture</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Request → Middleware → Handler → Storage → Response</span></span>
<span class="line"><span>                ↓</span></span>
<span class="line"><span>         WebSocket Hub → Broadcast</span></span></code></pre></div><h3 id="_4-frontend" tabindex="-1">4. Frontend <a class="header-anchor" href="#_4-frontend" aria-label="Permalink to &quot;4. Frontend&quot;">​</a></h3><p><strong>Technology</strong>: React 18, TypeScript, Tailwind CSS</p><p><strong>Architecture</strong>:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>src/</span></span>
<span class="line"><span>├── components/        # React components</span></span>
<span class="line"><span>│   ├── Traffic/       # Traffic list and details</span></span>
<span class="line"><span>│   ├── Rules/         # Rule management</span></span>
<span class="line"><span>│   ├── Scenarios/     # Scenario recording</span></span>
<span class="line"><span>│   └── Common/        # Shared UI components</span></span>
<span class="line"><span>├── hooks/             # Custom React hooks</span></span>
<span class="line"><span>│   ├── useTraffic     # Traffic state management</span></span>
<span class="line"><span>│   ├── useRules       # Rule state management</span></span>
<span class="line"><span>│   └── useWebSocket   # WebSocket connection</span></span>
<span class="line"><span>├── services/          # API clients</span></span>
<span class="line"><span>│   ├── api.ts         # REST API client</span></span>
<span class="line"><span>│   └── websocket.ts   # WebSocket client</span></span>
<span class="line"><span>└── types/             # TypeScript types</span></span></code></pre></div><p><strong>State Management</strong>:</p><ul><li>React hooks for local state</li><li>WebSocket for real-time updates</li><li>API calls for CRUD operations</li></ul><p><strong>Key Features</strong>:</p><ul><li><strong>Real-time Updates</strong>: WebSocket connection for live traffic</li><li><strong>Dark Mode</strong>: Theme persistence with localStorage</li><li><strong>Responsive</strong>: Mobile-friendly design</li><li><strong>Performance</strong>: Virtualized lists for large datasets</li></ul><h3 id="_5-mcp-server" tabindex="-1">5. MCP Server <a class="header-anchor" href="#_5-mcp-server" aria-label="Permalink to &quot;5. MCP Server&quot;">​</a></h3><p><strong>Technology</strong>: <a href="https://github.com/modelcontextprotocol/go-sdk" target="_blank" rel="noreferrer">modelcontextprotocol/go-sdk</a></p><p><strong>Implementation</strong>:</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> GlanceMCP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    storage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Storage</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    proxy   </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Proxy</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GlanceMCP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Resources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {URI: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;proxy://status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {URI: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;traffic://latest&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GlanceMCP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Tools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Tool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Tool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;inspect_network_traffic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;inspect_request_details&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;execute_request&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ... more tools</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GlanceMCP</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Prompts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Prompt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Prompt</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;analyze-traffic&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate-api-docs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {Name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;generate-scenario-test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Communication</strong>:</p><ul><li>Stdio transport for Claude Desktop</li><li>HTTP transport for other clients (planned)</li><li>JSON-RPC 2.0 protocol</li></ul><h2 id="data-flow" tabindex="-1">Data Flow <a class="header-anchor" href="#data-flow" aria-label="Permalink to &quot;Data Flow&quot;">​</a></h2><h3 id="capturing-traffic" tabindex="-1">Capturing Traffic <a class="header-anchor" href="#capturing-traffic" aria-label="Permalink to &quot;Capturing Traffic&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Client → Proxy → Rule Check → Forward → Server</span></span>
<span class="line"><span>  ↓         ↓                              ↓</span></span>
<span class="line"><span>  ↓         ↓                         Response</span></span>
<span class="line"><span>  ↓         ↓ ← Log to DB ← ───────────────┘</span></span>
<span class="line"><span>  ↓         ↓</span></span>
<span class="line"><span>  ↓    Broadcast to WebSocket</span></span>
<span class="line"><span>  ↓         ↓</span></span>
<span class="line"><span>  ↓    Dashboard Update</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Response</span></span></code></pre></div><h3 id="creating-a-mock" tabindex="-1">Creating a Mock <a class="header-anchor" href="#creating-a-mock" aria-label="Permalink to &quot;Creating a Mock&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>User (Dashboard/MCP)</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>API/MCP Server</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Storage.SaveRule()</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Proxy reloads rules</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Next matching request returns mock</span></span></code></pre></div><h3 id="scenario-recording" tabindex="-1">Scenario Recording <a class="header-anchor" href="#scenario-recording" aria-label="Permalink to &quot;Scenario Recording&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. User starts recording</span></span>
<span class="line"><span>2. Traffic captured → Steps added to scenario</span></span>
<span class="line"><span>3. User defines variable mappings</span></span>
<span class="line"><span>4. Scenario saved to database</span></span>
<span class="line"><span>5. Can replay or generate test code</span></span></code></pre></div><h2 id="security-model" tabindex="-1">Security Model <a class="header-anchor" href="#security-model" aria-label="Permalink to &quot;Security Model&quot;">​</a></h2><h3 id="certificate-management" tabindex="-1">Certificate Management <a class="header-anchor" href="#certificate-management" aria-label="Permalink to &quot;Certificate Management&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Startup:</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Generate CA cert + private key (in memory)</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Sign certificates dynamically for each domain</span></span>
<span class="line"><span>  ↓</span></span>
<span class="line"><span>Client trusts CA → Accepts dynamic certs</span></span></code></pre></div><p><strong>Security Notes</strong>:</p><ul><li>CA private key stored in memory only (by default)</li><li>Certificates valid for 1 year</li><li>No external CA communication</li><li>Local-only by design</li></ul><h3 id="threat-model" tabindex="-1">Threat Model <a class="header-anchor" href="#threat-model" aria-label="Permalink to &quot;Threat Model&quot;">​</a></h3><p><strong>In Scope</strong>:</p><ul><li>Local development machine</li><li>Trusted user</li><li>Controlled network</li></ul><p><strong>Out of Scope</strong>:</p><ul><li>Production use</li><li>Untrusted networks</li><li>Multi-user scenarios</li><li>Remote access</li></ul><h2 id="performance-characteristics" tabindex="-1">Performance Characteristics <a class="header-anchor" href="#performance-characteristics" aria-label="Permalink to &quot;Performance Characteristics&quot;">​</a></h2><h3 id="throughput" tabindex="-1">Throughput <a class="header-anchor" href="#throughput" aria-label="Permalink to &quot;Throughput&quot;">​</a></h3><ul><li><strong>Requests/Second</strong>: ~1,000 on modern hardware</li><li><strong>Concurrent Connections</strong>: 10,000+</li><li><strong>Latency Overhead</strong>: &lt; 10ms typical</li></ul><h3 id="memory-usage" tabindex="-1">Memory Usage <a class="header-anchor" href="#memory-usage" aria-label="Permalink to &quot;Memory Usage&quot;">​</a></h3><ul><li><strong>Base</strong>: ~50MB (empty database)</li><li><strong>Per Request</strong>: ~10KB (metadata only)</li><li><strong>Database</strong>: Grows with traffic (SQLite efficient)</li><li><strong>Frontend</strong>: ~20MB (React bundle)</li></ul><h3 id="scalability-limits" tabindex="-1">Scalability Limits <a class="header-anchor" href="#scalability-limits" aria-label="Permalink to &quot;Scalability Limits&quot;">​</a></h3><p>Current architecture suitable for:</p><ul><li>✅ Individual developer use</li><li>✅ Small team (&lt; 10 users)</li><li>✅ Moderate traffic (&lt; 10,000 req/day)</li><li>❌ High-traffic production monitoring</li><li>❌ Multi-tenant SaaS</li></ul><h2 id="build-process" tabindex="-1">Build Process <a class="header-anchor" href="#build-process" aria-label="Permalink to &quot;Build Process&quot;">​</a></h2><h3 id="development" tabindex="-1">Development <a class="header-anchor" href="#development" aria-label="Permalink to &quot;Development&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Frontend:        Backend:</span></span>
<span class="line"><span>  ↓                ↓</span></span>
<span class="line"><span>npm install      go mod download</span></span>
<span class="line"><span>  ↓                ↓</span></span>
<span class="line"><span>npm run dev      go run cmd/glance/main.go</span></span></code></pre></div><h3 id="production-build" tabindex="-1">Production Build <a class="header-anchor" href="#production-build" aria-label="Permalink to &quot;Production Build&quot;">​</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>1. Build Frontend:</span></span>
<span class="line"><span>   npm run build → dist/</span></span>
<span class="line"><span></span></span>
<span class="line"><span>2. Embed Frontend:</span></span>
<span class="line"><span>   go:embed dist → Go binary</span></span>
<span class="line"><span></span></span>
<span class="line"><span>3. Build Binary:</span></span>
<span class="line"><span>   go build -o glance</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Result: Single self-contained binary</span></span></code></pre></div><h3 id="cross-platform-build" tabindex="-1">Cross-Platform Build <a class="header-anchor" href="#cross-platform-build" aria-label="Permalink to &quot;Cross-Platform Build&quot;">​</a></h3><p>Uses <a href="https://goreleaser.com/" target="_blank" rel="noreferrer">GoReleaser</a>:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">builds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">goos</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">darwin</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">linux</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">windows</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    goarch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">amd64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">arm64</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ldflags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-s -w</span></span></code></pre></div><p>Produces:</p><ul><li>macOS (ARM64, AMD64)</li><li>Linux (AMD64, ARM64, ARM)</li><li>Windows (AMD64)</li></ul><h2 id="design-decisions" tabindex="-1">Design Decisions <a class="header-anchor" href="#design-decisions" aria-label="Permalink to &quot;Design Decisions&quot;">​</a></h2><h3 id="why-go" tabindex="-1">Why Go? <a class="header-anchor" href="#why-go" aria-label="Permalink to &quot;Why Go?&quot;">​</a></h3><ul><li><strong>Performance</strong>: Fast, compiled language</li><li><strong>Concurrency</strong>: Great for proxy server</li><li><strong>Single Binary</strong>: Easy distribution</li><li><strong>Cross-Platform</strong>: Build for all platforms</li></ul><h3 id="why-sqlite" tabindex="-1">Why SQLite? <a class="header-anchor" href="#why-sqlite" aria-label="Permalink to &quot;Why SQLite?&quot;">​</a></h3><ul><li><strong>Serverless</strong>: No separate database process</li><li><strong>Portable</strong>: Single file database</li><li><strong>Fast</strong>: Excellent for read-heavy workloads</li><li><strong>Reliable</strong>: Battle-tested, stable</li></ul><h3 id="why-react" tabindex="-1">Why React? <a class="header-anchor" href="#why-react" aria-label="Permalink to &quot;Why React?&quot;">​</a></h3><ul><li><strong>Ecosystem</strong>: Large community, many libraries</li><li><strong>Performance</strong>: Virtual DOM, efficient updates</li><li><strong>TypeScript</strong>: Type safety for large codebase</li><li><strong>Developer Experience</strong>: Great tooling</li></ul><h3 id="why-fiber" tabindex="-1">Why Fiber? <a class="header-anchor" href="#why-fiber" aria-label="Permalink to &quot;Why Fiber?&quot;">​</a></h3><ul><li><strong>Performance</strong>: Faster than standard net/http</li><li><strong>API</strong>: Express-like, familiar to web developers</li><li><strong>WebSocket</strong>: Built-in support</li><li><strong>Middleware</strong>: Rich ecosystem</li></ul><h2 id="future-improvements" tabindex="-1">Future Improvements <a class="header-anchor" href="#future-improvements" aria-label="Permalink to &quot;Future Improvements&quot;">​</a></h2><h3 id="planned-features" tabindex="-1">Planned Features <a class="header-anchor" href="#planned-features" aria-label="Permalink to &quot;Planned Features&quot;">​</a></h3><ul><li><strong>GraphQL API</strong>: More flexible querying</li><li><strong>Plugins</strong>: Extensibility for custom processors</li><li><strong>Clustering</strong>: Multi-instance coordination</li><li><strong>Streaming</strong>: Process large responses efficiently</li><li><strong>gRPC Support</strong>: Intercept gRPC traffic</li></ul><h3 id="performance-optimizations" tabindex="-1">Performance Optimizations <a class="header-anchor" href="#performance-optimizations" aria-label="Permalink to &quot;Performance Optimizations&quot;">​</a></h3><ul><li><strong>Connection Pooling</strong>: Reuse connections</li><li><strong>Response Streaming</strong>: Don&#39;t buffer large responses</li><li><strong>Selective Logging</strong>: Skip binary/large responses</li><li><strong>Database Sharding</strong>: Split by project/time</li></ul><h3 id="architecture-evolution" tabindex="-1">Architecture Evolution <a class="header-anchor" href="#architecture-evolution" aria-label="Permalink to &quot;Architecture Evolution&quot;">​</a></h3><p>Current: <strong>Monolith</strong> (Single binary) Future: <strong>Modular</strong> (Pluggable components)</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>glance-core      (proxy + storage)</span></span>
<span class="line"><span>glance-dashboard (web UI - optional)</span></span>
<span class="line"><span>glance-mcp       (MCP server - optional)</span></span>
<span class="line"><span>glance-plugins   (custom processors)</span></span></code></pre></div><h2 id="contributing" tabindex="-1">Contributing <a class="header-anchor" href="#contributing" aria-label="Permalink to &quot;Contributing&quot;">​</a></h2><p>See <a href="./development.html">Development Guide</a> for:</p><ul><li>Setting up development environment</li><li>Code structure and conventions</li><li>Testing guidelines</li><li>Pull request process</li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li><a href="./development.html">Development Guide</a> - Contribute to Glance</li><li><a href="./api.html">API Reference</a> - Build integrations</li><li><a href="./mcp/reference.html">MCP Reference</a> - Extend MCP capabilities</li></ul>`,100)])])}const g=a(l,[["render",t]]);export{d as __pageData,g as default};
