import{_ as i,o as a,c as t,ag as n}from"./chunks/framework.cqfd-qMR.js";const c=JSON.parse('{"title":"Android Configuration","description":"","frontmatter":{},"headers":[],"relativePath":"clients/android.md","filePath":"clients/android.md"}'),e={name:"clients/android.md"};function l(h,s,p,r,k,o){return a(),t("div",null,[...s[0]||(s[0]=[n(`<h1 id="android-configuration" tabindex="-1">Android Configuration <a class="header-anchor" href="#android-configuration" aria-label="Permalink to &quot;Android Configuration&quot;">​</a></h1><p>Glance provides ADB-based support for intercepting traffic from Android devices and emulators.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li>ADB (Android Debug Bridge) installed</li><li>USB debugging enabled on device</li><li>Android 7.0 (API 24) or higher</li></ul><h2 id="quick-setup" tabindex="-1">Quick Setup <a class="header-anchor" href="#quick-setup" aria-label="Permalink to &quot;Quick Setup&quot;">​</a></h2><p>Glance can automatically configure your Android device:</p><ol><li>Connect device via USB or start emulator</li><li>Run Glance with Android support:<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glance</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --android</span></span></code></pre></div></li><li>Glance will: <ul><li>Detect connected devices</li><li>Install CA certificate</li><li>Configure proxy settings</li><li>Set up port forwarding</li></ul></li></ol><h2 id="manual-setup" tabindex="-1">Manual Setup <a class="header-anchor" href="#manual-setup" aria-label="Permalink to &quot;Manual Setup&quot;">​</a></h2><h3 id="step-1-enable-usb-debugging" tabindex="-1">Step 1: Enable USB Debugging <a class="header-anchor" href="#step-1-enable-usb-debugging" aria-label="Permalink to &quot;Step 1: Enable USB Debugging&quot;">​</a></h3><p>On your Android device:</p><ol><li>Go to <strong>Settings</strong> → <strong>About Phone</strong></li><li>Tap <strong>Build Number</strong> 7 times to enable Developer Options</li><li>Go to <strong>Settings</strong> → <strong>Developer Options</strong></li><li>Enable <strong>USB Debugging</strong></li></ol><h3 id="step-2-connect-device" tabindex="-1">Step 2: Connect Device <a class="header-anchor" href="#step-2-connect-device" aria-label="Permalink to &quot;Step 2: Connect Device&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># List connected devices</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> devices</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Should show:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># List of devices attached</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ABC123456    device</span></span></code></pre></div><h3 id="step-3-install-ca-certificate" tabindex="-1">Step 3: Install CA Certificate <a class="header-anchor" href="#step-3-install-ca-certificate" aria-label="Permalink to &quot;Step 3: Install CA Certificate&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Export Glance CA certificate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:15501/ca.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> glance-ca.crt</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Push to device</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> glance-ca.crt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /sdcard/</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Install certificate</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># On device: Settings → Security → Install from storage</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Select glance-ca.crt</span></span></code></pre></div><h3 id="step-4-configure-proxy" tabindex="-1">Step 4: Configure Proxy <a class="header-anchor" href="#step-4-configure-proxy" aria-label="Permalink to &quot;Step 4: Configure Proxy&quot;">​</a></h3><h4 id="method-1-adb-reverse" tabindex="-1">Method 1: ADB Reverse <a class="header-anchor" href="#method-1-adb-reverse" aria-label="Permalink to &quot;Method 1: ADB Reverse&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Forward device&#39;s requests to Glance proxy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reverse</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcp:15500</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcp:15500</span></span></code></pre></div><h4 id="method-2-wifi-proxy-android-10" tabindex="-1">Method 2: WiFi Proxy (Android 10+) <a class="header-anchor" href="#method-2-wifi-proxy-android-10" aria-label="Permalink to &quot;Method 2: WiFi Proxy (Android 10+)&quot;">​</a></h4><ol><li>Go to <strong>Settings</strong> → <strong>Network &amp; Internet</strong> → <strong>WiFi</strong></li><li>Long press your network → <strong>Modify Network</strong></li><li><strong>Advanced Options</strong> → <strong>Proxy</strong> → <strong>Manual</strong></li><li>Set: <ul><li><strong>Proxy hostname</strong>: <code>localhost</code> (if using adb reverse) or your computer&#39;s IP</li><li><strong>Proxy port</strong>: <code>15500</code></li></ul></li><li>Save</li></ol><h4 id="method-3-global-proxy-requires-root" tabindex="-1">Method 3: Global Proxy (Requires Root) <a class="header-anchor" href="#method-3-global-proxy-requires-root" aria-label="Permalink to &quot;Method 3: Global Proxy (Requires Root)&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Set global proxy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> settings</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> put</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http_proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:15500</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Remove proxy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> settings</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> put</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http_proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> :0</span></span></code></pre></div><h2 id="certificate-installation" tabindex="-1">Certificate Installation <a class="header-anchor" href="#certificate-installation" aria-label="Permalink to &quot;Certificate Installation&quot;">​</a></h2><h3 id="user-certificate-android-7-10" tabindex="-1">User Certificate (Android 7-10) <a class="header-anchor" href="#user-certificate-android-7-10" aria-label="Permalink to &quot;User Certificate (Android 7-10)&quot;">​</a></h3><p>For apps targeting API 24-29, user certificates work by default:</p><ol><li>Download CA certificate on device</li><li><strong>Settings</strong> → <strong>Security</strong> → <strong>Install from storage</strong></li><li>Select certificate file</li><li>Name it &quot;Glance CA&quot;</li><li>Select &quot;VPN and apps&quot; usage</li></ol><h3 id="system-certificate-android-11" tabindex="-1">System Certificate (Android 11+) <a class="header-anchor" href="#system-certificate-android-11" aria-label="Permalink to &quot;System Certificate (Android 11+)&quot;">​</a></h3><p>Apps targeting API 30+ only trust system certificates. Two options:</p><h4 id="option-1-network-security-config-developers" tabindex="-1">Option 1: Network Security Config (Developers) <a class="header-anchor" href="#option-1-network-security-config-developers" aria-label="Permalink to &quot;Option 1: Network Security Config (Developers)&quot;">​</a></h4><p>Add to your app&#39;s <code>network_security_config.xml</code>:</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">network-security-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">debug-overrides</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">trust-anchors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            &lt;!-- Trust user certificates for debugging --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">certificates</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;user&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">certificates</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> src</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;system&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">trust-anchors</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">debug-overrides</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">network-security-config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>Reference in <code>AndroidManifest.xml</code>:</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">application</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    android:networkSecurityConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@xml/network_security_config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">application</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="option-2-install-as-system-certificate-requires-root" tabindex="-1">Option 2: Install as System Certificate (Requires Root) <a class="header-anchor" href="#option-2-install-as-system-certificate-requires-root" aria-label="Permalink to &quot;Option 2: Install as System Certificate (Requires Root)&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get certificate hash</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CERT_HASH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -inform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PEM</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -subject_hash_old</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> glance-ca.crt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> head</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Remount system as writable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remount</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Push certificate</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> glance-ca.crt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /system/etc/security/cacerts/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CERT_HASH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Set permissions</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 644</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /system/etc/security/cacerts/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$CERT_HASH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Reboot</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reboot</span></span></code></pre></div><h2 id="emulator-configuration" tabindex="-1">Emulator Configuration <a class="header-anchor" href="#emulator-configuration" aria-label="Permalink to &quot;Emulator Configuration&quot;">​</a></h2><h3 id="android-studio-emulator" tabindex="-1">Android Studio Emulator <a class="header-anchor" href="#android-studio-emulator" aria-label="Permalink to &quot;Android Studio Emulator&quot;">​</a></h3><p>Emulators are easier to configure:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Start emulator with writable system</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emulator</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -avd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> YOUR_AVD_NAME</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -writable-system</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Or configure proxy at startup</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emulator</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -avd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> YOUR_AVD_NAME</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -http-proxy</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> localhost:15500</span></span></code></pre></div><h3 id="certificate-for-emulator" tabindex="-1">Certificate for Emulator <a class="header-anchor" href="#certificate-for-emulator" aria-label="Permalink to &quot;Certificate for Emulator&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Emulator with root access</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remount</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Push certificate to system</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:15501/ca.crt</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> glance-ca.crt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> glance-ca.crt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /system/etc/security/cacerts/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x509</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -inform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> PEM</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -subject_hash_old</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> glance-ca.crt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> head</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Restart</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reboot</span></span></code></pre></div><h2 id="testing" tabindex="-1">Testing <a class="header-anchor" href="#testing" aria-label="Permalink to &quot;Testing&quot;">​</a></h2><p>Verify configuration works:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># On device, any app should route through proxy</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Open Chrome and visit any HTTPS site</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Traffic should appear in Glance dashboard</span></span></code></pre></div><p>Or use ADB:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Make request from device</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">adb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shell</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://api.github.com/users</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Should appear in Glance</span></span></code></pre></div><h2 id="framework-specific-configuration" tabindex="-1">Framework-Specific Configuration <a class="header-anchor" href="#framework-specific-configuration" aria-label="Permalink to &quot;Framework-Specific Configuration&quot;">​</a></h2><h3 id="okhttp" tabindex="-1">OkHttp <a class="header-anchor" href="#okhttp" aria-label="Permalink to &quot;OkHttp&quot;">​</a></h3><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> okhttp3.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> java.net.InetSocketAddress</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> java.net.Proxy</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> proxy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Proxy.Type.HTTP, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">InetSocketAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> client </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OkHttpClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(proxy)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="retrofit" tabindex="-1">Retrofit <a class="header-anchor" href="#retrofit" aria-label="Permalink to &quot;Retrofit&quot;">​</a></h3><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> proxy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Proxy.Type.HTTP, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">InetSocketAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> okHttpClient </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> OkHttpClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(proxy)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> retrofit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Retrofit.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Builder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">baseUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.example.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">client</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(okHttpClient)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><h3 id="volley" tabindex="-1">Volley <a class="header-anchor" href="#volley" aria-label="Permalink to &quot;Volley&quot;">​</a></h3><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">val</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> proxy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Proxy.Type.HTTP, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">InetSocketAddress</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Volley doesn&#39;t support proxy directly</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Use OkHttp or configure system-wide</span></span></code></pre></div><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="certificate-not-trusted" tabindex="-1">Certificate Not Trusted <a class="header-anchor" href="#certificate-not-trusted" aria-label="Permalink to &quot;Certificate Not Trusted&quot;">​</a></h3><ul><li><strong>Check API Level</strong>: API 30+ requires system certificate or network security config</li><li><strong>Verify Installation</strong>: Settings → Security → Trusted Credentials → User</li><li><strong>App-Specific</strong>: Some apps may have certificate pinning</li></ul><h3 id="no-traffic-visible" tabindex="-1">No Traffic Visible <a class="header-anchor" href="#no-traffic-visible" aria-label="Permalink to &quot;No Traffic Visible&quot;">​</a></h3><ul><li><strong>Verify Proxy</strong>: Check WiFi proxy settings</li><li><strong>ADB Reverse</strong>: Ensure <code>adb reverse</code> command succeeded</li><li><strong>Port Conflict</strong>: Check port 15500 isn&#39;t used on device</li></ul><h3 id="https-errors" tabindex="-1">HTTPS Errors <a class="header-anchor" href="#https-errors" aria-label="Permalink to &quot;HTTPS Errors&quot;">​</a></h3><ul><li><strong>Certificate Mismatch</strong>: Ensure using latest Glance CA</li><li><strong>Pinning</strong>: Some apps use certificate pinning (can&#39;t be intercepted)</li><li><strong>Old Cache</strong>: Clear app cache and restart</li></ul><h3 id="certificate-pinning" tabindex="-1">Certificate Pinning <a class="header-anchor" href="#certificate-pinning" aria-label="Permalink to &quot;Certificate Pinning&quot;">​</a></h3><p>Some apps (banking, security-focused) use certificate pinning and can&#39;t be intercepted:</p><ul><li><strong>Root + Frida</strong>: Advanced users can bypass pinning</li><li><strong>Not Recommended</strong>: Bypassing pinning may violate ToS</li><li><strong>Alternative</strong>: Use API documentation instead</li></ul><h2 id="production-apps-vs-debug-builds" tabindex="-1">Production Apps vs Debug Builds <a class="header-anchor" href="#production-apps-vs-debug-builds" aria-label="Permalink to &quot;Production Apps vs Debug Builds&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Type</th><th>User Cert</th><th>System Cert</th><th>Network Config</th></tr></thead><tbody><tr><td><strong>Debug Build</strong></td><td>✅ Yes</td><td>✅ Yes</td><td>✅ Configurable</td></tr><tr><td><strong>Release Build</strong></td><td>❌ No (API 30+)</td><td>✅ Yes</td><td>⚠️ If included</td></tr><tr><td><strong>3rd Party App</strong></td><td>❌ No (API 30+)</td><td>✅ Yes</td><td>❌ Can&#39;t modify</td></tr></tbody></table><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><ol><li><strong>Use Emulator</strong>: Easier to configure and reset</li><li><strong>Debug Builds</strong>: Always test with debug builds during development</li><li><strong>Root When Needed</strong>: Consider rooted emulator for testing production apps</li><li><strong>Network Security Config</strong>: Always include for debug builds</li></ol><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li><a href="/glance/clients.html">Client Configuration</a> - Other platforms</li><li><a href="/glance/troubleshooting.html">Troubleshooting</a> - Common issues</li><li><a href="/glance/mcp/">MCP Integration</a> - Analyze mobile traffic with AI</li></ul>`,69)])])}const g=i(e,[["render",l]]);export{c as __pageData,g as default};
