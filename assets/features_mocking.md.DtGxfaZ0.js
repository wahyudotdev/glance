import{_ as l,o,c as r,ag as n,j as i,t as e,a as t}from"./chunks/framework.cqfd-qMR.js";const h="/glance/assets/rules.BfU57WH1.png",m=JSON.parse('{"title":"Mocking & Breakpoints","description":"","frontmatter":{},"headers":[],"relativePath":"features/mocking.md","filePath":"features/mocking.md"}'),p={name:"features/mocking.md"};function d(a,s,k,c,u,g){return o(),r("div",null,[s[3]||(s[3]=n('<h1 id="mocking-breakpoints" tabindex="-1">Mocking &amp; Breakpoints <a class="header-anchor" href="#mocking-breakpoints" aria-label="Permalink to &quot;Mocking &amp; Breakpoints&quot;">​</a></h1><p>Glance&#39;s rule engine allows you to intercept and modify traffic on the fly using mocks and breakpoints.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>The rule engine supports two types of rules:</p><ul><li><strong>Mocks</strong>: Return static responses without hitting the real server</li><li><strong>Breakpoints</strong>: Pause traffic for manual inspection and modification</li></ul><p>Both types use pattern matching to determine which requests to intercept.</p><p><img src="'+h+`" alt="Traffic Rules"></p><h2 id="mocks" tabindex="-1">Mocks <a class="header-anchor" href="#mocks" aria-label="Permalink to &quot;Mocks&quot;">​</a></h2><p>Mocks allow you to return custom responses for specific requests without contacting the actual server.</p><h3 id="creating-a-mock" tabindex="-1">Creating a Mock <a class="header-anchor" href="#creating-a-mock" aria-label="Permalink to &quot;Creating a Mock&quot;">​</a></h3><ol><li>Go to the <strong>Rules</strong> tab in the dashboard</li><li>Click <strong>Add Mock</strong></li><li>Configure the mock: <ul><li><strong>Name</strong>: Descriptive name for the rule</li><li><strong>URL Pattern</strong>: Glob or regex pattern to match</li><li><strong>Method</strong>: HTTP method (or <code>*</code> for all)</li><li><strong>Status Code</strong>: HTTP status to return</li><li><strong>Headers</strong>: Response headers (key-value pairs)</li><li><strong>Body</strong>: Response body content</li></ul></li></ol><h3 id="example-mock-user-api" tabindex="-1">Example: Mock User API <a class="header-anchor" href="#example-mock-user-api" aria-label="Permalink to &quot;Example: Mock User API&quot;">​</a></h3><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Mock Users API&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;urlPattern&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.example.com/users*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;method&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GET&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;statusCode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;headers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Content-Type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/json&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Alice&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">},</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      {</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Bob&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="pattern-matching" tabindex="-1">Pattern Matching <a class="header-anchor" href="#pattern-matching" aria-label="Permalink to &quot;Pattern Matching&quot;">​</a></h3><p>Glance supports flexible pattern matching:</p><ul><li><strong>Exact Match</strong>: <code>https://api.example.com/users</code></li><li><strong>Wildcard</strong>: <code>https://api.example.com/users/*</code></li><li><strong>Any Subdomain</strong>: <code>https://*.example.com/users</code></li><li><strong>Query Parameters</strong>: <code>https://api.example.com/users?page=*</code></li></ul><h3 id="response-types" tabindex="-1">Response Types <a class="header-anchor" href="#response-types" aria-label="Permalink to &quot;Response Types&quot;">​</a></h3><p>Mocks support various response formats:</p><ul><li><strong>JSON</strong>: Automatically serialized</li><li><strong>XML</strong>: Served with appropriate content type</li><li><strong>HTML</strong>: For mocking web pages</li><li><strong>Plain Text</strong>: Simple text responses</li><li><strong>Binary</strong>: Base64-encoded data</li></ul><h3 id="cors-handling" tabindex="-1">CORS Handling <a class="header-anchor" href="#cors-handling" aria-label="Permalink to &quot;CORS Handling&quot;">​</a></h3><p>Mocks automatically handle CORS:</p><ul><li>Responds to <code>OPTIONS</code> preflight requests</li><li>Includes permissive CORS headers</li><li>Supports credentials and custom headers</li></ul><h2 id="breakpoints" tabindex="-1">Breakpoints <a class="header-anchor" href="#breakpoints" aria-label="Permalink to &quot;Breakpoints&quot;">​</a></h2><p>Breakpoints pause requests or responses for manual inspection and modification.</p><h3 id="creating-a-breakpoint" tabindex="-1">Creating a Breakpoint <a class="header-anchor" href="#creating-a-breakpoint" aria-label="Permalink to &quot;Creating a Breakpoint&quot;">​</a></h3><ol><li>Go to the <strong>Rules</strong> tab</li><li>Click <strong>Add Breakpoint</strong></li><li>Configure: <ul><li><strong>Name</strong>: Descriptive name</li><li><strong>URL Pattern</strong>: Pattern to match</li><li><strong>Method</strong>: HTTP method</li><li><strong>Type</strong>: Request, Response, or Both</li></ul></li></ol><h3 id="using-breakpoints" tabindex="-1">Using Breakpoints <a class="header-anchor" href="#using-breakpoints" aria-label="Permalink to &quot;Using Breakpoints&quot;">​</a></h3><p>When a breakpoint is triggered:</p><ol><li>Traffic is paused</li><li>Notification appears in dashboard</li><li>You can inspect and modify: <ul><li>Headers</li><li>Body</li><li>Status code (for responses)</li></ul></li><li>Click <strong>Continue</strong> to release the traffic</li><li>Or <strong>Drop</strong> to block the request</li></ol><h3 id="example-use-cases" tabindex="-1">Example Use Cases <a class="header-anchor" href="#example-use-cases" aria-label="Permalink to &quot;Example Use Cases&quot;">​</a></h3><p><strong>Debug Authentication:</strong></p><ul><li>Set breakpoint on login endpoint</li><li>Inspect credentials being sent</li><li>Modify token in response</li></ul><p><strong>Test Error Handling:</strong></p><ul><li>Pause successful response</li><li>Change status to 500</li><li>Verify app handles error correctly</li></ul><p><strong>Modify API Response:</strong></p><ul><li>Intercept user profile endpoint</li><li>Add/remove fields in JSON</li><li>Test frontend with different data structures</li></ul><h2 id="rule-management" tabindex="-1">Rule Management <a class="header-anchor" href="#rule-management" aria-label="Permalink to &quot;Rule Management&quot;">​</a></h2><h3 id="priority" tabindex="-1">Priority <a class="header-anchor" href="#priority" aria-label="Permalink to &quot;Priority&quot;">​</a></h3><p>Rules are evaluated in order:</p><ol><li>Breakpoints are checked first</li><li>Then mocks</li><li>First matching rule wins</li></ol><p>You can reorder rules by dragging them in the dashboard.</p><h3 id="enable-disable" tabindex="-1">Enable/Disable <a class="header-anchor" href="#enable-disable" aria-label="Permalink to &quot;Enable/Disable&quot;">​</a></h3><p>Toggle rules on/off without deleting them:</p><ul><li><strong>Green Toggle</strong>: Rule is active</li><li><strong>Gray Toggle</strong>: Rule is disabled</li></ul><h3 id="rule-statistics" tabindex="-1">Rule Statistics <a class="header-anchor" href="#rule-statistics" aria-label="Permalink to &quot;Rule Statistics&quot;">​</a></h3><p>Each rule shows:</p><ul><li>Number of matches</li><li>Last matched timestamp</li><li>Success/failure count</li></ul><h2 id="advanced-features" tabindex="-1">Advanced Features <a class="header-anchor" href="#advanced-features" aria-label="Permalink to &quot;Advanced Features&quot;">​</a></h2><h3 id="conditional-mocks" tabindex="-1">Conditional Mocks <a class="header-anchor" href="#conditional-mocks" aria-label="Permalink to &quot;Conditional Mocks&quot;">​</a></h3><p>Use headers to conditionally apply mocks:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;urlPattern&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.example.com/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;requiredHeaders&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;X-Mock-Scenario&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;error&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;statusCode&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="dynamic-responses" tabindex="-1">Dynamic Responses <a class="header-anchor" href="#dynamic-responses" aria-label="Permalink to &quot;Dynamic Responses&quot;">​</a></h3><p>Include variables in mock responses:</p>`,53)),i("ul",null,[i("li",null,[i("code",null,e(a.timestamp),1),s[0]||(s[0]=t(": Current Unix timestamp",-1))]),i("li",null,[i("code",null,e(a.uuid),1),s[1]||(s[1]=t(": Random UUID",-1))]),i("li",null,[i("code",null,e(a.random),1),s[2]||(s[2]=t(": Random number",-1))])]),s[4]||(s[4]=n(`<h3 id="template-bodies" tabindex="-1">Template Bodies <a class="header-anchor" href="#template-bodies" aria-label="Permalink to &quot;Template Bodies&quot;">​</a></h3><p>Use JSON templates for complex responses:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{uuid}}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;created_at&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;{{timestamp}}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;success&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="mcp-integration" tabindex="-1">MCP Integration <a class="header-anchor" href="#mcp-integration" aria-label="Permalink to &quot;MCP Integration&quot;">​</a></h2><p>AI agents can create and manage rules via MCP:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Create a mock for the login endpoint that returns a success token</span></span></code></pre></div><p>Claude will use the <code>add_mock_rule</code> tool to create the mock for you.</p><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><h3 id="naming" tabindex="-1">Naming <a class="header-anchor" href="#naming" aria-label="Permalink to &quot;Naming&quot;">​</a></h3><p>Use descriptive names:</p><ul><li>✅ &quot;Mock successful login with admin token&quot;</li><li>❌ &quot;test1&quot;</li></ul><h3 id="patterns" tabindex="-1">Patterns <a class="header-anchor" href="#patterns" aria-label="Permalink to &quot;Patterns&quot;">​</a></h3><p>Be specific to avoid unintended matches:</p><ul><li>✅ <code>https://api.example.com/v1/users/*</code></li><li>❌ <code>*users*</code> (too broad)</li></ul><h3 id="organization" tabindex="-1">Organization <a class="header-anchor" href="#organization" aria-label="Permalink to &quot;Organization&quot;">​</a></h3><p>Group related rules:</p><ul><li>Use prefixes: &quot;Auth - Login Mock&quot;, &quot;Auth - Token Refresh&quot;</li><li>Create scenarios for different test cases</li><li>Disable rules when not in use</li></ul><h3 id="testing" tabindex="-1">Testing <a class="header-anchor" href="#testing" aria-label="Permalink to &quot;Testing&quot;">​</a></h3><p>Always test your rules:</p><ol><li>Create the rule</li><li>Trigger it with a request</li><li>Verify in traffic list that rule matched</li><li>Check response is as expected</li></ol><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="mock-not-matching" tabindex="-1">Mock Not Matching <a class="header-anchor" href="#mock-not-matching" aria-label="Permalink to &quot;Mock Not Matching&quot;">​</a></h3><ul><li>Check URL pattern matches exactly</li><li>Verify method is correct</li><li>Ensure rule is enabled</li><li>Check rule priority</li></ul><h3 id="breakpoint-not-triggering" tabindex="-1">Breakpoint Not Triggering <a class="header-anchor" href="#breakpoint-not-triggering" aria-label="Permalink to &quot;Breakpoint Not Triggering&quot;">​</a></h3><ul><li>Verify pattern syntax</li><li>Check request method</li><li>Ensure breakpoint type is correct</li></ul><h3 id="cors-issues" tabindex="-1">CORS Issues <a class="header-anchor" href="#cors-issues" aria-label="Permalink to &quot;CORS Issues&quot;">​</a></h3><p>Mocks include CORS headers by default. If still having issues:</p><ul><li>Check browser console for specific CORS error</li><li>Add custom CORS headers to mock</li><li>Verify <code>Access-Control-Allow-Origin</code> is set</li></ul><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li><a href="./scenarios.html">Scenario Recording</a> - Group requests into replayable sequences</li><li><a href="/glance/mcp/">MCP Integration</a> - Let AI create rules for you</li><li><a href="/glance/api.html">API Reference</a> - Use the REST API to manage rules</li></ul>`,30))])}const q=l(p,[["render",d]]);export{m as __pageData,q as default};
